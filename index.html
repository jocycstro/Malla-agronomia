<body>
<h1>Malla Curricular de Agronomía</h1>

<div class="semestres">
    <!-- ... tus div .semestre aquí ... -->
</div>

<h2>Total de Créditos Aprobados</h2>
<div id="total-sct">0 SCT aprobados de 0 totales</div>

<script>
    const ramos = document.querySelectorAll('.ramo');

    function calcularTotalSCT() {
        let totalSCT = 0;
        ramos.forEach(ramo => {
            const match = ramo.textContent.match(/\((\d+)\s*SCT\)/);
            if (match) totalSCT += parseInt(match[1]);
        });
        return totalSCT;
    }

    function actualizarTotalSCT() {
        let aprobados = 0;
        const total = calcularTotalSCT();
        ramos.forEach(ramo => {
            if (ramo.classList.contains("aprobado")) {
                const match = ramo.textContent.match(/\((\d+)\s*SCT\)/);
                if (match) aprobados += parseInt(match[1]);
            }
        });
        document.getElementById("total-sct").textContent = `${aprobados} SCT aprobados de ${total} totales`;
    }

    function cargarEstado() {
        ramos.forEach(ramo => {
            const id = ramo.id;
            if (localStorage.getItem(id) === "true") {
                ramo.classList.add("aprobado");
            }
        });
        actualizarEstados();
        actualizarTotalSCT();
    }

    function toggleAprobado(elem) {
        const id = elem.id;
        const aprobado = elem.classList.contains("aprobado");
        elem.classList.toggle("aprobado", !aprobado);
        localStorage.setItem(id, !aprobado);
        actualizarEstados();
        actualizarTotalSCT();
    }

    function actualizarEstados() {
        ramos.forEach(ramo => {
            if (ramo.classList.contains("aprobado")) return;
            const prereqs = ramo.dataset.prerequisitos.split(',').filter(p => p);
            const cumplidos = prereqs.every(p => localStorage.getItem(p) === "true");
            ramo.classList.toggle("habilitado", prereqs.length === 0 || cumplidos);
        });
    }

    window.onload = cargarEstado;
</script>
</body>
